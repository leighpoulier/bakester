<%= form_with model: @bake do |f| %>

  <% if @bake.errors.any? %>
    <h3>There <%= 'is'.pluralize(@bake.errors.count) + " " + pluralize(@bake.errors.count, "error") %></h3>
    <ul>
      <% @bake.errors.each do |error| %>
        <li><%= error.full_message %></li>
      <% end %>
    </ul>
  <% end %>
  <div>
    <%= f.label :name %>
    <%= f.text_field :name %>
  </div>

  <div>
    <%= f.label :description %>
    <%= f.text_area :description, cols: 80, rows: 6  %>
  </div>

  <div>
    <div>
      <%= label_tag :unit_price_dollars %>
      <%= number_field_tag :unit_price_dollars, @bake.unit_price_dollars, step: 0.05, min: 0.05 %>
    </div>
      <div> per </div>
      <%= f.label :unit %>
      <%= f.text_field :unit %>
    </div>
  </div>
  
  <div>
    <%= f.label :category %>
    <%= f.collection_select :category_id, Category.order(:name), :id, :name, prompt: "Select Category" %>
  </div>
  
  <div>
    <%= f.label :lead_time_days %>
    <%= f.text_field :lead_time_days %>
  </div>

  <div>
    <%= f.label :image %>
    <% if (action_name == "edit" || action_name == "update")  && @bake.image.attached? && @bake.errors[:image].count == 0  %>
      <%= image_tag @bake.image %>
      <%= label_tag :bake_remove_image, "Remove Image" %>
      <%= check_box_tag :bake_remove_image %>
    <% end %>
    <%= f.file_field :bake_image_upload, accept: Bake::IMAGE_TYPES.join(", ")  %>
  <div>

  <div>
    <%= f.submit %>
  </div>

<% end %>
<!-- <%= button_to "Delete Image", :bakes_image_purge, method: :delete, data: {confirm: "Are you sure you want to delete this image?"} %> -->

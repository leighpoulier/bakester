<%= form_with model: @bake, class: 'row' do |f| %>

  <% if @bake.errors.any? %>
    <div class='py-2 col-12'>
      <h3>There <%= 'is'.pluralize(@bake.errors.count) + " " + pluralize(@bake.errors.count, "error") %></h3>
      <ul>
        <% @bake.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
  <div class='py-2 col-md-6'>
    <%= f.label :name, class: 'form-label' %>
    <%= f.text_field :name, class: 'form-control' %>
  </div>
  
  <div class="py-2 col-md-3">
    <%= f.label :category, class: 'form-label' %>
    <%= f.collection_select :category_id, Category.order(:name), :id, :name, {prompt: "Select Category"}, {class: "form-select"} %>
  </div>
  
  <div class="py-2 col-md-3">
    <%= f.label :lead_time_days,"Lead Time (days)", class: 'form-label' %>
    <%= f.text_field :lead_time_days, class: 'form-control' %>
  </div>

  <div class="py-2 col-12">
    <%= f.label :description, class: 'form-label' %>
    <%= f.text_area :description, class: 'form-control', rows: 6  %>
  </div>

    <div class="col-3">
      <%= label_tag :price_dollars, "Price", class: 'form-label' %>
      <%= number_field_tag :price_dollars, @bake.price_dollars, step: 0.05, min: 0.05, class: 'form-control' %>
    </div>
    <div class="col-1 d-flex flex-column justify-content-end align-items-center">
      <span class="">per</span>
    </div>
    <div class="col-3">
      <%= f.label :unit_count, "Count", class: 'form-label' %>
      <%= f.number_field :unit_count, step: 1, min: 0, class: 'form-control' %>
    </div>
    <div class="col-5">
      <%= f.label :unit, "Unit (singular, eg: cake, cookie)", class: 'form-label' %>
      <%= f.text_field :unit, class: 'form-control' %>
    </div>

  <div class="py-2 row">
    <% if (action_name == "edit" || action_name == "update")  && @bake.image.attached? && @bake.errors[:image].count == 0  %>
      <div class="col-lg-6 py-2">
        <%= f.label :image, class: 'form-label' %>
        <%= image_tag @bake.image, class: 'form-control rounded' %>
      </div>
      <div class="col-lg-3 form-check py-2">
        <%= check_box_tag :bake_remove_image, class: "form-check-input" %>
        <%= label_tag :bake_remove_image, "Remove Image", class: 'form-label' %>
      </div>
      <div class="col-lg-3 py-2">
        <%= f.label :image, "Replace Image", class: 'form-label' %>
    <% else %>
      <div class="col-lg-3 py-2">
        <%= f.label :image, "Add Image", class: 'form-label' %>
    <% end %>
    <%= f.file_field :bake_image_upload, accept: Bake::IMAGE_TYPES.join(", ") %>
    </div>
  <div>

  <div class="py-2 row">
    <div class="custom-control custom-radio custom-control-inline">
      <%= f.radio_button :active, "true",  class: "custom-control-input" %>
      <%= f.label :active, "Active", class: "custom-control-label" %>
    </div>
    <div class="custom-control custom-radio custom-control-inline">
      <%= f.radio_button :active, "false",  class: "custom-control-input" %>
      <%= f.label :active, "Hidden", class: "custom-control-label" %>
    </div>
  </div>

  <div class="py-2">
    <%= f.submit %>
  </div>

<% end %>


<% if (action_name == "edit" || action_name == "update") %>
  <% if @bake.image.attached? && @bake.errors[:image].count == 0  %>
    <div class='py-2'>
      <%= button_to "Delete Image", bakes_image_purge_path(@bake.id), method: :delete, data: {confirm: "Are you sure you want to delete this image?"} %>
    </div>
  <% end %>
  <div class='py-2'>
    <%= button_to "Delete Bake", @bake, method: :delete, data: {confirm: "THIS WILL DELETE THE ENTIRE BAKE !\nAre you sure?"} %>
  </div>
<% end %>
